---
driver:
  name: vagrant

provisioner:
  name: puppet_apply
  manifests_path: spec/manifests
  modules_path: .kitchen-modules
  require_chef_for_busser: false
  resolve_with_librarian_puppet: false
  puppet_detailed_exitcodes: true
  require_puppet_collections: true
  puppet_whitelist_exit_code:
    - 2

platforms:
  - name: windows-2012r2
    driver_plugin: vagrant
    driver_config:
      box: kensykora/windows_2012_r2_standard
    transport:
      name: winrm
      elevated: true

verifier:
  name: shell

suites:
  - name: ssms2016
    provisioner:
      manifest: ssms2016.pp
    verifier:
      command: rspec -c -f d -I spec spec/acceptance/ssms2016_spec.rb
